---
title: "01. アイデア・背景"
description: "Confluence Local Sync を開発する動機と解決したい課題"
---

## 解決したい課題

### 1. AI エージェントが社内情報にアクセスできない

現状、Cursor などの AI エージェントは社内 Confluence に保存されている重要な情報にアクセスできません。

これにより、以下の AI アシストを受けづらい状況にあります：
- 社内の仕様書・設計書の検索
- 過去のプロジェクト知見の活用
- AI にコンテキストの共有をする場合、毎回手動で情報をコピー＆ペーストする必要がある

### 2. Confluence API のデータがそのまま使えない

Confluence API から取得できるデータには課題があります：
- **HTML タグが含まれる**: 生成 AI にとってノイズになる
- **構造が複雑**: AI が理解しやすい形式ではない
- **そのまま MCP で提供できない**: 前処理が必須

### 3. サーバーインフラの制約

社内の事情により、以下の制約があります：

- 事業部として専用サーバーを建てることはできない
- 大量の API リクエストは不適切（Confluence サーバー負荷）
- 各メンバーが直接 Confluence API を叩くのは非効率

### 4. 情報の鮮度管理

複数のチームメンバーがローカルに情報を持つ場合：

- 最新情報との同期が必要
- 無駄な API リクエストは避けたい
- 効率的なキャッシュ戦略が必要

## 解決アプローチ

### コア・アイデア

**GAS（Google Apps Script）をキャッシュ層として活用する**

```mermaid
graph LR
    A[Confluence] -->|定期ポーリング| B[GAS Backend]
    B -->|Markdown 変換| C[Google Drive]
    C -->|CLI 同期| D[Local Files]
    D -->|MCP Server| E[AI Agent]
```

### なぜこのアプローチか

1. **GAS の利点**:
   - サーバーレスで無料
   - Google Drive との連携が容易
   - 定期実行（トリガー）機能が標準装備
   - 社内で利用許可が得やすい

2. **Google Drive をキャッシュに使う理由**:
   - チーム全体で共有可能
   - 容量が十分
   - API アクセスが簡単
   - バージョン管理も可能

3. **CLI ツールの役割**:
   - 必要なページのみローカルに取得
   - 差分同期で効率化
   - ユーザーごとの柔軟な管理

## 期待される効果

### 1. 開発効率の向上

- AI エージェントが社内仕様書を参照しながら設計立案ができる
- 過去の設計ドキュメントを基にした提案
- ドメイン知識を含む質問応答・施策立案の壁打ち

### 2. 情報アクセスの民主化

- Confluence の検索より MCP 経由の方が使いやすい可能性
- AI が要約・整理してくれる
- 必要な情報への到達時間短縮

### 3. チーム全体の知識共有

- 個人がローカルに持つ情報を標準化
- 最新情報への同期が自動化
- ドキュメント活用の促進

## 将来的な拡張可能性

- より高度な検索・フィルタリング機能
- Markdown からさらに最適化されたフォーマットへの変換
